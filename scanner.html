<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barcode Scanner</title>
    <style>
        video {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            display: block;
        }
    </style>
</head>
<body>
    <h1>Barcode Scanner</h1>
    <video id="scanner" muted></video>

    <script src="https://cdn.rawgit.com/serratus/quaggaJS/master/dist/quagga.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            Quagga.init({
                inputStream: {
                    name: "Live",
                    type: "LiveStream",
                    target: document.querySelector('#scanner'), // Video element
                    constraints: {
                        width: 640,
                        height: 480,
                        facingMode: 'user' // Use 'user' for front camera
                    },
                },
                decoder: {
                    readers: ['code_128_reader'] // Use 'code_128_reader' for Code 128
                },
                locator: {
                    patchSize: 'medium',
                    halfSample: true
                },
                numOfWorkers: 4,
                locate: true,
                multiple: false,
                debug: {
                    showCanvas: true,
                    showPatches: true,
                    showFoundPatches: true,
                    showSkeleton: true,
                    showLabels: true,
                    showPatchLabels: true,
                    showRemainingPatchLabels: true,
                    boxFromPatches: {
                        showTransformed: true,
                        showTransformedBox: true,
                        showBB: true
                    }
                }
            }, function (err) {
                if (err) {
                    console.error(err);
                    return;
                }
                console.log('Initialization finished. Ready to start');
                Quagga.start();
            });

            Quagga.onDetected(function (result) {
                console.log('Barcode detected:', result.codeResult.code);
                Quagga.stop();
            });
        });
    </script>
</body>
</html>

